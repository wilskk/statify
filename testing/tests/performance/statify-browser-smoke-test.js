// Generated by Grafana k6 Studio (1.6.0) on 2025-08-14T11:14:15.158Z
// Modified for Statify testing with smoke test configuration

import { browser } from "k6/browser";
import { check } from "k6";

export const options = {
  scenarios: {
    ui_smoke_test: {
      executor: "shared-iterations",
      iterations: 1,
      vus: 1,
      options: { 
        browser: { 
          type: "chromium"
        } 
      },
    },
  },
  thresholds: {
    browser_web_vital_fcp: ["p(95)<3000"],
    browser_web_vital_lcp: ["p(95)<4000"],
  },
};

export default async function () {
  const page = await browser.newPage();

  try {
    // Navigate to Statify
    await page.goto('https://statify-dev.student.stis.ac.id/dashboard/data');
    
    // Wait for page to load
    await page.waitForSelector('[data-testid="file-menu-trigger"]', { timeout: 30000 });

    await page.locator('[data-testid="file-menu-trigger"]').click();

    await page.locator('[data-testid="file-menu-example-data"]').click();

    await page.locator("div:nth-of-type(8) .font-medium").click();

    await page.locator('[data-testid="analyze-menu-trigger"]').click();

    await page
      .locator('[data-testid="descriptive-statistics-frequencies"]')
      .click();

    await page.locator("div:nth-of-type(1) > .truncate > .truncate").click();

    await page.locator(".border-primary > .flex > .truncate").click();

    await page
      .locator(
        "#available-variables-container > div:nth-of-type(1) > .flex > .truncate",
      )
      .click();

    await page.locator(".border-primary > .flex > .truncate").click();

    await page
      .locator("#available-variables-container > div:nth-of-type(1)")
      .click();

    await page
      .locator("#available-variables-container > .border-primary")
      .click();

    await page
      .locator(
        "#available-variables-container > div:nth-of-type(1) > .flex > .truncate",
      )
      .click();

    await page.locator(".border-primary > .flex > .truncate").click();

    await page
      .locator(
        "#available-variables-container > div:nth-of-type(1) > .flex > .truncate",
      )
      .click();

    await page.locator(".border-primary > .flex > .truncate").click();

    await page
      .locator(
        "#available-variables-container > div:nth-of-type(1) > .flex > .truncate",
      )
      .click();

    await page.locator(".border-primary > .flex > .truncate").click();

    await page
      .locator(
        "#available-variables-container > div:nth-of-type(1) > .flex > .truncate",
      )
      .click();

    await page.locator(".border-primary > .flex > .truncate").click();

    await page
      .locator(
        "#available-variables-container > div:nth-of-type(1) > .flex > .truncate",
      )
      .click();

    await page.locator(".border-primary > .flex > .truncate").click();

    await page
      .locator(
        "#available-variables-container > div:nth-of-type(1) > .flex > .truncate",
      )
      .click();

    await page.locator(".border-primary > .flex > .truncate").click();

    await page.locator("#statistics-tab-trigger").click();

    await page
      .locator("#percentile-values-section > .flex > .font-medium")
      .click();

    await page.locator("#quartiles").click();

    await page
      .locator("div:nth-of-type(3) > .flex > .flex > label:nth-of-type(1)")
      .click();

    await page.locator("#cutPoints").click();

    await page.locator("#central-tendency-section > div:nth-of-type(2)").click();

    await page
      .locator("#central-tendency-section > div:nth-of-type(2) > .font-medium")
      .click();

    await page.locator("#mean").click();

    await page
      .locator("#central-tendency-section > div:nth-of-type(3) > .font-medium")
      .click();

    await page.locator("#median").click();

    await page
      .locator("#central-tendency-section > div:nth-of-type(4) > .font-medium")
      .click();

    await page.locator("#mode").click();

    await page
      .locator("#central-tendency-section > div:nth-of-type(5) > .font-medium")
      .click();

    await page.locator("#sum").click();

    await page
      .locator("#distribution-section > div:nth-of-type(2) > .font-medium")
      .click();

    await page.locator("#skewness").click();

    await page
      .locator("#distribution-section > div:nth-of-type(3) > .font-medium")
      .click();

    await page.locator("#kurtosis").click();

    await page.locator("#dispersion-section").click();

    await page
      .locator("#dispersion-section > div:nth-of-type(2) > .font-medium")
      .click();

    await page
      .locator("#dispersion-section > div:nth-of-type(2) > .peer")
      .click();

    await page
      .locator("#dispersion-section > div:nth-of-type(3) > .font-medium")
      .click();

    await page.locator("#variance").click();

    await page
      .locator("#dispersion-section > div:nth-of-type(4) > .font-medium")
      .click();

    await page.locator("#range").click();

    await page
      .locator("#dispersion-section > div:nth-of-type(5) > .font-medium")
      .click();

    await page.locator("#minimum").click();

    await page.locator("div:nth-of-type(6) > .font-medium").click();

    await page.locator("#maximum").click();

    await page.locator("div:nth-of-type(7) > .font-medium").click();

    await page.locator("#semean").click();

    await page.locator(".flex > div > .shadow").click();

    await page.locator("span > .lucide").click();

    await page.locator(".text-foreground > .truncate").click();

    // Add basic checks
    check(page, {
      'page loaded successfully': () => page.url().includes('statify-dev.student.stis.ac.id'),
    });

  } catch (error) {
    console.error('Browser test failed:', error);
    check(false, {
      'browser test completed without errors': () => false,
    });
  } finally {
    await page.close();
  }
}

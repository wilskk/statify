# Desain Fitur: Transposisi Data

Dokumen ini berisi paket desain (Design Package) untuk Feature Set `Transposisi Data`.

---

## 2. Design Package

### 2.1. Diagram Urutan (Sequence Diagrams)

*Diagram ini menunjukkan alur transposisi data, yang menghasilkan dataset yang sama sekali baru.*

### **Sequence Diagram: Transpose Data**

Dokumentasi ini berisi diagram sekuens yang merinci alur kerja fitur "Transpose", yang mengubah baris data menjadi kolom dan sebaliknya.

---

### 1. Alur Proses Transposisi Data

Diagram ini menunjukkan bagaimana interaksi pengguna memicu layanan transposisi, yang menghasilkan data dan skema variabel yang sepenuhnya baru, yang kemudian digunakan untuk menimpa state di `DataStore` dan `VariableStore`.

```mermaid
sequenceDiagram
    title: Alur Proses Transposisi Data
    actor User

    box "Frontend Components"
        participant UI as "TransposeUI<br>.../Transpose/TransposeUI.tsx"
    end

    box "Hooks & Services"
        participant Hook as "useTranspose<br>.../hooks/useTranspose.ts"
        participant Service as "transposeService<br>.../services/transposeService.ts"
    end
    
    box "Zustand Stores"
        participant VarStore as "useVariableStore"
        participant DataStore as "useDataStore"
    end

    User->>+UI: Buka modal "Transpose Data"
    UI->>+Hook: Inisialisasi hook
    Hook->>+VarStore: Get variables
    deactivate VarStore
    Hook-->>-UI: Return state awal
    UI-->>User: Tampilkan modal

    User->>UI: Pilih variabel untuk ditransposisi
    User->>UI: (Opsional) Pilih 'Name Variable'
    User->>UI: Klik tombol "OK"

    UI->>+Hook: handleOk()
    Hook->>+DataStore: Get current data
    Hook->>+Service: transposeDataService(data, selectedVars, nameVar)
    Service-->>-Hook: Return { transposedData, finalTransposedVariables }
    deactivate Service
    deactivate DataStore

    Hook->>+DataStore: setData(transposedData)
    deactivate DataStore

    Hook->>+VarStore: overwriteVariables(finalTransposedVariables)
    deactivate VarStore

    Hook->>UI: onClose()
    deactivate Hook
    deactivate UI
```

### 2.2. Penyempurnaan Model Objek (Object Model Refinements)

*Perubahan pada model objek (kelas, atribut, metode baru) yang ditemukan selama desain.*

- **Komponen:**
  - `Transpose/TransposeUI.tsx`: Komponen UI yang berisi pilihan untuk variabel yang akan ditransposisi dan variabel penamaan.
- **Hook Logika:**
  - `useTranspose.ts`: Mengelola state UI, memanggil `transposeService`, dan kemudian memanggil `DataService` untuk membuat dataset baru dengan hasil transposisi.
- **Service:**
  - `transposeService.ts`: Berisi logika murni untuk transposisi. Ini adalah operasi matriks di mana baris menjadi kolom dan kolom menjadi baris. Service ini akan menghasilkan struktur data dan metadata yang sama sekali baru.

### 2.3. Catatan Alternatif Desain (Design Alternatives)

*Diskusi dan keputusan mengenai pilihan desain yang signifikan.*

- **Alternatif 1:** Memodifikasi dataset yang ada.
  - **Kelebihan:** Tidak perlu membuka tab/jendela data baru.
  - **Kekurangan:** Transposisi adalah transformasi yang sangat fundamental dan merusak. Bentuk data sebelum dan sesudah transposisi sama sekali berbeda. Memodifikasi data yang ada akan sangat membingungkan dan membuat pengguna kehilangan data asli mereka.
- **Keputusan:** Selalu membuat dataset baru. Ini adalah pendekatan yang aman dan dapat diprediksi. Pengguna dapat dengan jelas melihat hasil transposisi di jendela data baru sambil tetap menjaga dataset asli mereka tetap utuh.

--- 
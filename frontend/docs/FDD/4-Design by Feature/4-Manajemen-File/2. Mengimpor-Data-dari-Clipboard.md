# Desain Fitur: Mengimpor Data dari Clipboard

Dokumen ini berisi paket desain (Design Package) untuk Feature Set `Mengimpor Data dari Clipboard`.

---

## 2. Design Package

### 2.1. Diagram Urutan (Sequence Diagrams)

*Diagram ini mengilustrasikan alur dua langkah: (1) Menempelkan data dari clipboard, dan (2) Mengonfigurasi dan mengimpor data tersebut.*

### **Sequence Diagram: Import from Clipboard**

Dokumentasi ini berisi diagram sekuens yang merinci alur kerja dua tahap untuk fitur impor data dari clipboard.

---

### 1. Tahap 1: Paste Data

Diagram ini menunjukkan bagaimana pengguna memulai proses impor, menempelkan data (baik melalui tombol atau manual), dan melanjutkan ke tahap konfigurasi.

```mermaid
sequenceDiagram
    title: Alur Proses Import dari Clipboard - Tahap 1: Paste Data
    actor User as "Pengguna"

    box "Frontend"
        participant Modal as "ImportClipboardModal<br>/Modals/File/ImportClipboard/index.tsx"
        participant Logic as "useImportClipboardLogic<br>.../hooks/useImportClipboardLogic.ts"
        participant View as "PasteStep<br>.../components/ImportClipboardPasteStep.tsx"
        participant Service as "ClipboardService<br>.../services/services.ts"
    end

    autonumber

    Pengguna->>+Modal: Buka modal "Import from Clipboard"
    Modal->>+Logic: Inisialisasi hook, atur `stage: 'paste'`
    Logic-->>-Modal: Kembalikan state
    Modal->>+View: Render komponen PasteStep
    View-->>-Pengguna: Tampilkan UI untuk paste

    alt "Paste via Button"
        Pengguna->>View: Klik tombol "Paste from Clipboard"
        View->>+Service: Panggil `readTextFromClipboard()`
        Service-->>-View: Kembalikan teks dari clipboard
        View->>+Logic: Panggil `handleTextPaste(text)`
        Logic-->>-View: Perbarui state `pastedText`
        deactivate Logic
    else "Manual Paste (Ctrl+V)"
        Pengguna->>View: Paste teks ke Textarea
        View->>+Logic: Panggil `handleTextPaste(text)`
        Logic-->>-View: Perbarui state `pastedText`
        deactivate Logic
    end

    Pengguna->>View: Klik tombol "Continue"
    View->>+Logic: Panggil `handleContinueToConfigure()`
    Logic->>Logic: Atur `stage: 'configure'`
    Logic-->>-Modal: Perbarui state, memicu render ulang
    deactivate Logic
    deactivate View
    deactivate Modal
```

---

### 2. Tahap 2: Konfigurasi & Impor

Setelah data ditempel, diagram ini menjelaskan bagaimana pengguna mengonfigurasi opsi parsing, melihat pratinjau, dan akhirnya mengimpor data ke dalam aplikasi.

```mermaid
sequenceDiagram
    title: Alur Proses Import dari Clipboard - Tahap 2: Konfigurasi & Impor
    actor User as "Pengguna"

    box "Frontend"
        participant Modal as "ImportClipboardModal<br>/Modals/File/ImportClipboard/index.tsx"
        participant Logic as "useImportClipboardLogic<br>.../hooks/useImportClipboardLogic.ts"
        participant View as "ConfigStep<br>.../components/ImportClipboardConfigurationStep.tsx"
        participant Processor as "useImportClipboardProcessor<br>.../hooks/useImportClipboardProcessor.ts"
        participant Stores as "Zustand Stores"
    end
    
    autonumber

    Modal->>+View: Render ConfigStep dengan `pastedText`
    View->>+Processor: Panggil `excelStyleTextToColumns()` untuk preview awal
    Processor-->>-View: Kembalikan `previewData`
    View-->>Pengguna: Tampilkan UI konfiguasi & preview data

    loop Pengguna mengubah opsi
        Pengguna->>View: Ubah delimiter, header, dll.
        View->>+Processor: Panggil `excelStyleTextToColumns()` dengan opsi baru
        Processor-->>-View: Kembalikan `previewData` yang diperbarui
        View-->>Pengguna: Update tampilan preview
    end

    Pengguna->>View: Klik tombol "Import"
    View->>+Processor: Panggil `processClipboardData(text, options)`
    Processor->>Processor: Proses teks menjadi data terstruktur
    Processor->>+Stores: Panggil `setData()` & `overwriteVariables()`
    Stores-->>-Processor: Selesai memperbarui state
    Processor-->>-View: Proses impor selesai
    
    View->>Logic: Panggil `onClose()` (dari props)
    Logic->>Modal: Panggil `handleModalClose()`
    deactivate View
    deactivate Processor
    Modal-->>Pengguna: Tutup modal
```

### 2.2. Penyempurnaan Model Objek (Object Model Refinements)

*Perubahan pada model objek (kelas, atribut, metode baru) yang ditemukan selama desain.*

- **Komponen Bertingkat:**
  - `ImportClipboardPasteStep.tsx`: UI untuk langkah pertama (menempelkan data).
  - `ImportClipboardConfigurationStep.tsx`: UI untuk langkah kedua (konfigurasi dan pratinjau).
- **Hook Logika:**
  - `useImportClipboardLogic.ts`: Mengelola state wizard (langkah saat ini, data mentah).
  - `useImportClipboardProcessor.ts`: Mengambil data mentah dan konfigurasi, menggunakan library parsing (seperti PapaParse) untuk memprosesnya, dan kemudian memanggil `DataService` untuk memuat hasilnya.
- **Pola Desain:**
  - **Wizard Pattern:** Memecah proses yang kompleks menjadi beberapa langkah yang lebih sederhana untuk meningkatkan pengalaman pengguna.

### 2.3. Catatan Alternatif Desain (Design Alternatives)

*Diskusi dan keputusan mengenai pilihan desain yang signifikan.*

- **Alternatif 1:** Menempatkan semua opsi (paste, delimiter, header) dalam satu layar.
  - **Kelebihan:** Hanya satu langkah.
  - **Kekurangan:** Antarmuka menjadi sangat ramai dan membingungkan. Pengguna mungkin tidak tahu urutan yang benar untuk mengisi opsi.
- **Keputusan:** Menggunakan pendekatan wizard dua langkah. Ini memandu pengguna secara logis: pertama, sediakan data; kedua, konfigurasikan bagaimana data itu harus dibaca. Pratinjau di langkah kedua memberikan umpan balik langsung atas pilihan konfigurasi.

---

## 3. Laporan Inspeksi Desain (Design Inspection Report)

- **Hasil:** `[Diterima / Diterima dengan Revisi / Ditolak]`
- **Cacat yang Ditemukan:**
  1. `[Deskripsi Cacat 1]`
- **Daftar Tugas (To-Do List):**
  - `[Tindakan perbaikan 1]` 
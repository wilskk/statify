# Area Fitur Utama: Manajemen Data

**Tujuan Dokumen**: Dokumen ini merinci daftar fitur utama dalam area **Manajemen Data**, yang dirancang sesuai dengan metodologi *Feature-Driven Development* (FDD). Setiap fitur merepresentasikan aktivitas bernilai bisnis yang dapat dikembangkan, diuji, dan dikirimkan secara independen.

**Struktur Fitur**: Fitur-fitur di bawah ini diorganisasi secara logis, dimulai dari operasi dasar seperti pengurutan dan seleksi data, dilanjutkan dengan pengelolaan properti variabel, transformasi struktur data, hingga fitur analisis lanjutan seperti agregasi dan pembobotan. Pengelompokan ini bertujuan untuk mempermudah pemahaman alur kerja pengguna dan proses pengembangan.

> Catatan: Setiap fitur harus dapat diuji dan dikirimkan kepada pengguna sebagai satu unit fungsional yang utuh dan bernilai bisnis.

---

## Diagram Alur Kerja Umum

Diagram sekuens berikut mengilustrasikan alur kerja umum untuk sebagian besar fitur manajemen data. Ini menunjukkan pola interaksi yang konsisten antara pengguna, komponen antarmuka (UI), logika aplikasi (hooks), dan manajemen state terpusat. Sebagian besar fitur mengikuti pola ini, baik untuk operasi sinkron yang cepat maupun operasi asinkron yang lebih berat menggunakan web worker.

```mermaid
sequenceDiagram
    title: Alur Kerja Umum Fitur Manajemen Data
    actor User as "Pengguna"

    box "Frontend (React)"
        participant Modal as "UI Komponen<br>(FeatureModal.tsx)"
        participant Hook as "Hook Logika<br>(useFeatureLogic.ts)"
        participant Service as "Servis Logika Murni<br>(featureService.ts)"
        participant Worker as "Web Worker<br>(feature.worker.js)"
    end

    box "State Management (Zustand)"
        participant Stores as "Zustand Stores<br>(useDataStore, useVariableStore, etc.)"
    end

    autonumber

    User->>+Modal: Buka dialog fitur (misal: 'Sort Cases')
    Modal->>+Hook: Inisialisasi hook dengan konfigurasi awal
    Hook->>+Stores: Ambil data & variabel terkini
    Stores-->>-Hook: Kembalikan state
    Hook-->>-Modal: Kembalikan state & fungsi handler
    Modal-->>User: Tampilkan dialog dengan data

    User->>Modal: Lakukan konfigurasi (pilih variabel, atur opsi)
    Modal->>Hook: Panggil fungsi handler untuk perbarui state lokal
    Hook-->>Modal: UI diperbarui sesuai konfigurasi

    User->>Modal: Klik tombol konfirmasi ("OK" / "Selesai")
    Modal->>+Hook: Panggil `handleConfirm()`

    Hook->>Stores: Tampilkan indikator proses (loading)
    
    alt Pemrosesan Data
        
        opt Proses Cepat / Sinkron
            Hook->>+Service: Panggil fungsi proses dengan data & konfigurasi
            Service->>Service: Lakukan transformasi data
            Service-->>-Hook: Kembalikan hasil (data baru, variabel baru)
        end
        
        opt Proses Berat / Asinkron
            Hook->>Stores: Ambil dataset lengkap
            Stores-->>Hook: Dataset
            Hook->>+Worker: Kirim data & konfigurasi via `postMessage`
            Worker->>Worker: Lakukan proses komputasi di background
            Worker-->>-Hook: Kembalikan hasil via `onmessage`
        end

    end

    Hook->>Hook: Olah hasil dari Service/Worker
    
    loop Untuk setiap perubahan
        Hook->>+Stores: Perbarui state global<br>(setData, overwriteVariables, addVariable, setMeta)
    end
    deactivate Stores
    
    Hook->>Stores: Sembunyikan indikator proses
    
    Hook->>Modal: Panggil `onClose()`
    deactivate Hook
    Modal-->>-User: Dialog ditutup, UI utama diperbarui
    deactivate Modal
```

---

## 1. Pengurutan Kasus (*Sort Cases*)

| No | Fitur | Deskripsi |
| :-- | :----------------------------------------------------------- | :---------------------------------------------- |
| 1. | Urutkan kasus berdasarkan variabel | Pengguna dapat mengurutkan seluruh dataset berdasarkan satu atau beberapa variabel, baik secara menaik maupun menurun. |
| 2. | Atur prioritas pengurutan | Saat menggunakan beberapa variabel, pengguna dapat menentukan urutan prioritas pengurutan. |
| 3. | Atur arah pengurutan per variabel | Pengguna dapat menetapkan arah pengurutan (menaik atau menurun) secara individual untuk setiap variabel. |
| 4. | Kembalikan pengaturan pengurutan | Pengguna dapat mengembalikan seluruh konfigurasi pengurutan ke keadaan semula. |
| 5. | Validasi konfigurasi pengurutan | Sistem memastikan setidaknya satu variabel telah dipilih sebelum proses pengurutan dijalankan. |
| 6. | Simpan dataset terurut | Dataset yang telah diurutkan dapat disimpan sebagai berkas baru atau untuk menggantikan dataset yang sedang aktif. |

## 2. Pengurutan Variabel

| No | Fitur | Deskripsi |
| :-- | :----------------------------------------------------------- | :---------------------------------------------- |
| 1. | Urutkan variabel berdasarkan atribut | Pengguna dapat mengurutkan variabel berdasarkan berbagai atribut, seperti nama, tipe, label, format, dan level pengukuran. |
| 2. | Atur arah pengurutan | Pengguna dapat memilih arah pengurutan (menaik atau menurun) untuk setiap atribut yang dipilih. |
| 3. | Kembalikan pengaturan pengurutan | Pengguna dapat mengembalikan semua konfigurasi pengurutan variabel ke keadaan semula. |
| 4. | Validasi konfigurasi pengurutan | Sistem memastikan setidaknya satu atribut pengurutan telah dipilih sebelum proses dijalankan. |
| 5. | Perbarui struktur dataset secara fisik | Sistem akan menyusun ulang urutan variabel dan kolom data secara fisik untuk menjaga integritas data. |
| 6. | Tangani kesalahan secara komprehensif | Sistem menyediakan penanganan kesalahan yang lengkap untuk memastikan proses pengurutan berjalan dengan aman. |

## 3. Seleksi Kasus

| No | Fitur | Deskripsi |
| :-- | :----------------------------------------------------------- | :---------------------------------------------- |
| 1. | Pilih kasus berdasarkan kondisi | Pengguna dapat memilih sub-set kasus menggunakan ekspresi logika. |
| 2. | Pilih kasus secara acak | Pengguna dapat mengambil sampel acak dari dataset dengan menentukan persentase atau jumlah kasus yang diinginkan. |
| 3. | Pilih kasus berdasarkan rentang | Pengguna dapat memilih kasus berdasarkan nomor urut atau rentang baris tertentu. |
| 4. | Gunakan evaluator ekspresi yang komprehensif | Sistem menyediakan evaluator ekspresi yang mampu memproses kondisi kompleks, termasuk fungsi matematika, teks, dan statistik. |
| 5. | Gunakan fungsi matematika dan statistik | Pengguna dapat memanfaatkan fungsi seperti ABS(), SQRT(), ROUND(), MAX(), MIN(), SUM(), MEAN(), MEDIAN(), dan SD() dalam ekspresi. |
| 6. | Gunakan fungsi teks | Pengguna dapat memanfaatkan fungsi seperti CONCAT(), LENGTH(), LOWER(), UPPER(), dan TRIM() dalam ekspresi. |
| 7. | Gunakan fungsi deteksi nilai hilang | Pengguna dapat menggunakan fungsi MISSING() dan NMISS() untuk menangani nilai yang hilang dalam ekspresi. |
| 8. | Konfigurasi melalui dialog terpisah | Sistem menyediakan dialog yang berbeda untuk setiap metode seleksi (kondisi, acak, rentang) dengan validasi yang menyeluruh. |
| 9. | Tangani kesalahan dan validasi secara komprehensif | Sistem menyediakan validasi lengkap dan penanganan kesalahan untuk memastikan ekspresi yang dimasukkan benar dan dapat diproses. |
| 10. | Buat variabel filter otomatis | Sistem dapat secara otomatis membuat variabel filter baru untuk menandai kasus yang terpilih dan yang tidak. |

## 4. Identifikasi Kasus Duplikat

| No | Fitur | Deskripsi |
| :-- | :----------------------------------------------------------- | :---------------------------------------------- |
| 1. | Identifikasi kasus duplikat | Pengguna dapat menemukan dan menandai kasus yang identik berdasarkan kriteria variabel yang dipilih. |
| 2. | Pilih variabel pembanding | Pengguna dapat menentukan variabel mana saja yang akan digunakan sebagai dasar untuk mengidentifikasi duplikasi. |
| 3. | Buat variabel indikator kasus primer | Pengguna dapat membuat variabel baru yang menandai kasus primer (nilai 1) dan kasus duplikat (nilai 0) dengan nama yang dapat disesuaikan. |
| 4. | Buat penghitung urutan kasus duplikat | Pengguna dapat membuat variabel baru yang memberikan nomor urut untuk setiap kasus dalam sebuah kelompok duplikat. |
| 5. | Tentukan urutan dalam kelompok duplikat | Pengguna dapat mengurutkan kasus dalam setiap kelompok duplikat berdasarkan variabel tertentu untuk menentukan mana yang dianggap sebagai kasus primer. |
| 6. | Kelola hasil identifikasi | Pengguna dapat memindahkan kasus duplikat ke bagian atas dataset, menyaring kasus non-duplikat, atau menampilkan laporan frekuensi duplikasi. |
| 7. | Proses identifikasi di latar belakang | Sistem menggunakan *Web Worker* untuk menjalankan proses identifikasi duplikat di latar belakang agar antarmuka pengguna tidak terganggu. |
| 8. | Akses panduan interaktif fitur duplikat | Sistem menyediakan panduan interaktif untuk membantu pengguna memahami dan menggunakan fitur identifikasi duplikat. |

## 5. Properti Variabel (Ubah Massal)

| No | Fitur | Deskripsi |
| :-- | :----------------------------------------------------------- | :---------------------------------------------- |
| 1. | Ubah properti variabel secara massal | Pengguna dapat mengubah properti seperti tipe, label, dan format untuk beberapa variabel sekaligus. |
| 2. | Pilih variabel yang akan diubah | Pengguna dapat memilih variabel mana saja yang propertinya akan diubah. |
| 3. | Atur properti variabel | Pengguna dapat mengubah tipe data, label, format tampilan, serta properti lainnya. |
| 4. | Dapatkan saran level pengukuran otomatis | Sistem menganalisis data dan merekomendasikan level pengukuran yang paling sesuai, lengkap dengan penjelasannya. |
| 5. | Beri label nilai secara otomatis | Pengguna dapat secara otomatis menghasilkan label untuk nilai-nilai dalam sebuah variabel berdasarkan pola atau aturan tertentu. |
| 6. | Lacak perubahan label nilai | Sistem melacak dan menandai label nilai yang telah diubah untuk mempermudah proses peninjauan dan validasi. |
| 7. | Batasi pemindaian untuk optimasi performa | Pengguna dapat membatasi jumlah kasus dan nilai unik yang dipindai untuk mempercepat analisis pada set data besar. |
| 8. | Definisikan nilai hilang melalui dialog | Pengguna dapat menetapkan nilai yang dianggap hilang (baik nilai tunggal maupun rentang) melalui dialog yang terintegrasi. |

## 6. Penentuan Level Pengukuran Variabel

| No | Fitur | Deskripsi |
| :-- | :----------------------------------------------------------- | :---------------------------------------------- |
| 1. | Tetapkan level pengukuran variabel | Pengguna dapat menetapkan level pengukuran (Nominal, Ordinal, Skala) untuk variabel yang statusnya masih belum diketahui. |
| 2. | Klasifikasikan variabel secara intuitif | Pengguna dapat memindahkan variabel dari daftar "Belum Diketahui" ke kategori target (Nominal, Ordinal, Skala) menggunakan fitur seret-dan-lepas (drag-and-drop) atau tombol panah. |
| 3. | Kelola konfigurasi secara sistematis | Sistem menyediakan fungsi untuk mengatur ulang, menampilkan informasi panduan, dan mengurutkan variabel secara konsisten untuk pengalaman pengguna yang lebih baik. |

## 7. Tanggal dan Waktu

| No | Fitur | Deskripsi |
| :-- | :----------------------------------------------------------- | :---------------------------------------------- |
| 1. | Definisikan struktur tanggal otomatis | Pengguna dapat memilih dari 20 lebih format tanggal yang tersedia, dan sistem akan secara otomatis membuat variabel komponen waktu yang sesuai. |
| 2. | Hasilkan data sampel berurutan | Sistem mengisi variabel tanggal baru dengan data sampel berurutan untuk memberikan pratinjau struktur data. |
| 3. | Simpan metadata tanggal untuk analisis deret waktu | Sistem menyimpan konfigurasi format tanggal dalam metadata agar dapat digunakan oleh fitur analisis deret waktu lainnya. |

## 8. Restrukturisasi Data

| No | Fitur | Deskripsi |
| :-- | :----------------------------------------------------------- | :---------------------------------------------- |
| 1. | Restrukturisasi dari variabel menjadi kasus | Pengguna dapat mengubah struktur data dari format lebar (banyak variabel) menjadi format panjang (banyak kasus). |
| 2. | Restrukturisasi dari kasus menjadi variabel | Pengguna dapat mengubah struktur data dari format panjang (banyak kasus) menjadi format lebar (banyak variabel). |
| 3. | Transposisi seluruh data | Pengguna dapat melakukan transposisi pada seluruh dataset, mengubah baris menjadi kolom dan sebaliknya. |
| 4. | Gunakan wizard restrukturisasi dengan validasi | Sistem menyediakan wizard tiga langkah dengan validasi menyeluruh untuk memandu pengguna selama proses restrukturisasi. |
| 5. | Atur opsi restrukturisasi | Pengguna dapat mengonfigurasi opsi tambahan seperti membuat variabel penghitung, variabel indeks, atau membuang variabel kosong. |
| 6. | Tangani kesalahan dan validasi secara komprehensif | Sistem menyediakan validasi lengkap dan penanganan kesalahan untuk memastikan konfigurasi restrukturisasi sudah benar. |

## 9. Transposisi Data

| No | Fitur | Deskripsi |
| :-- | :----------------------------------------------------------- | :---------------------------------------------- |
| 1. | Transposisi data (baris menjadi kolom) | Pengguna dapat mengubah struktur data dengan menjadikan baris sebagai kolom dan sebaliknya. |
| 2. | Pilih variabel untuk ditransposisi | Pengguna dapat memilih variabel mana yang akan diubah menjadi baris menggunakan antarmuka seret-dan-lepas (drag-and-drop). |
| 3. | Tentukan nama kolom dari variabel | Pengguna dapat menetapkan variabel yang nilainya akan digunakan sebagai nama untuk kolom-kolom baru hasil transposisi. |
| 4. | Buat variabel label kasus otomatis | Sistem secara otomatis membuat variabel `case_lbl` yang berisi nama-nama variabel asli sebelum transposisi. |
| 5. | Validasi dan perbaiki nama variabel otomatis | Sistem secara otomatis memeriksa dan memperbaiki nama variabel yang tidak valid sesuai dengan aturan penamaan. |
| 6. | Kembalikan pengaturan transposisi | Pengguna dapat mengembalikan semua konfigurasi transposisi ke keadaan semula. |
| 7. | Tangani kesalahan secara komprehensif | Sistem menyediakan penanganan kesalahan yang lengkap untuk memastikan proses transposisi berjalan dengan aman. |

## 10. Agregasi Data

| No | Fitur | Deskripsi |
| :-- | :----------------------------------------------------------- | :---------------------------------------------- |
| 1. | Agregasi data berdasarkan variabel pengelompok | Pengguna dapat mengelompokkan data berdasarkan variabel tertentu untuk menghitung statistik ringkas per kelompok. |
| 2. | Pilih fungsi agregasi | Pengguna dapat memilih berbagai fungsi agregasi, seperti Sum, Mean, Count, Min, dan Max. |
| 3. | Beri nama variabel agregat | Pengguna dapat memberikan nama dan label deskriptif untuk setiap variabel baru yang dihasilkan dari agregasi. |
| 4. | Tentukan hasil agregasi | Pengguna dapat memilih untuk menyimpan hasil agregasi sebagai dataset baru atau menambahkannya sebagai kolom pada dataset aktif. |
| 5. | Gunakan fungsi statistik ringkasan | Pengguna dapat menghitung nilai Mean, Median, Sum, dan Standard Deviation untuk variabel numerik. |
| 6. | Gunakan fungsi nilai spesifik | Pengguna dapat mengambil nilai pertama (First), terakhir (Last), minimum (Minimum), atau maksimum (Maximum) dari setiap kelompok. |
| 7. | Gunakan fungsi penghitungan kasus | Pengguna dapat menghitung jumlah kasus terbobot (N), jumlah kasus hilang terbobot (NMISS), jumlah kasus tidak terbobot (NU), dan jumlah kasus hilang tidak terbobot (NUMISS). |
| 8. | Gunakan fungsi persentase dan fraksi | Pengguna dapat menghitung persentase nilai yang berada di atas (Above), di bawah (Below), di dalam (Inside), atau di luar (Outside) rentang yang ditentukan. |
| 9. | Validasi tipe data fungsi agregasi | Sistem memastikan fungsi agregasi yang dipilih sesuai dengan tipe data variabel (misalnya, teks atau angka). |
| 10. | Optimalkan performa untuk set data besar | Pengguna dapat mengatur opsi pengurutan data untuk mempercepat proses agregasi pada set data berukuran besar. |
| 11. | Cegah konflik variabel | Sistem mencegah variabel yang sudah diagregasi untuk digunakan kembali sebagai variabel pengelompok. |
| 12. | Buat nama variabel agregat otomatis | Sistem secara otomatis menghasilkan nama variabel baru berdasarkan nama variabel asal dan fungsi agregasi yang diterapkan. |
| 13. | Atur fungsi agregasi melalui dialog | Pengguna dapat mengonfigurasi fungsi agregasi menggunakan dialog interaktif yang mudah digunakan. |
| 14. | Atur nama dan label melalui dialog | Pengguna dapat mengubah nama dan label variabel agregat melalui dialog khusus. |
| 15. | Akses panduan interaktif fitur agregasi | Sistem menyediakan panduan interaktif yang memandu pengguna memahami fitur agregasi dalam 12 langkah. |
| 16. | Tambahkan variabel penghitung kasus | Pengguna dapat membuat variabel baru yang berisi jumlah kasus untuk setiap kelompok dengan nama yang dapat disesuaikan. |
| 17. | Proses agregasi di latar belakang | Sistem menggunakan *Web Worker* untuk menjalankan proses agregasi di latar belakang, sehingga antarmuka pengguna tetap responsif. |
| 18. | Tangani kesalahan dan validasi secara komprehensif | Sistem menyediakan dialog kesalahan dan validasi menyeluruh untuk menangani setiap masalah dan memastikan integritas data. |

## 11. Pembobotan Kasus

| No | Fitur | Deskripsi |
| :-- | :----------------------------------------------------------- | :---------------------------------------------- |
| 1. | Aktifkan pembobotan kasus | Pengguna dapat mengaktifkan pembobotan kasus dengan memilih variabel numerik sebagai acuan bobot. |
| 2. | Nonaktifkan pembobotan kasus | Pengguna dapat menonaktifkan pembobotan yang sedang aktif. |
| 3. | Tampilkan status pembobotan | Sistem menampilkan status pembobotan saat ini, termasuk nama variabel yang digunakan sebagai bobot. |

---

**Total Fitur Bernilai Bisnis: 78**

Setiap fitur di atas dapat diuji secara independen dan memberikan nilai bisnis langsung kepada pengguna. Fitur-fitur ini tidak bergantung pada implementasi teknis tertentu dan dapat dikirim ke pengguna sebagai unit fungsional yang lengkap.